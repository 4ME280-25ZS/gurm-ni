<!DOCTYPE html>
<html lang="cs">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>ŠPAJZ | Přihlášení</title>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Cherry+Bomb+One&family=Jost:wght@300;400;500;600;700&display=swap"
			rel="stylesheet"
		/>
		<link rel="stylesheet" href="styles.css" />
	</head>
	<body class="login-body">
		<main class="login-page" aria-labelledby="login-heading">
			<section class="login-header">
				<div class="login-logo">
					<div class="logo-hat-wrapper" aria-hidden="true">
						<img src="Vector.svg" alt="" class="logo-hat" />
						<img src="Group 1.svg" alt="" class="logo-fork-svg" />
					</div>
					<img src="Group.svg" alt="ŠPAJZ" class="logo-text" />
					<h1 class="logo-title sr-only">ŠPAJZ</h1>
				</div>
				<h2 id="login-heading" class="login-heading">PŘIHLÁŠENÍ</h2>
			</section>

			<section class="login-section">
				<form class="login-form" id="login-form">
					<label class="sr-only" for="email">Email</label>
					<input
						id="email"
						name="email"
						type="email"
						class="login-input"
						placeholder="Email"
						required
					/>

					<label class="sr-only" for="password">Heslo</label>
					<input
						id="password"
						name="password"
						type="password"
						class="login-input"
						placeholder="Heslo"
						required
					/>

					<button type="submit" class="login-button">LOG IN</button>
				</form>
				<div class="auth-switch">
					<span>Nemáš účet?</span>
					<a href="registrace.html" class="auth-switch-link">Registrace</a>
				</div>
			</section>
		</main>
		<script type="module">
			import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";
			import { SUPABASE_URL, SUPABASE_ANON_KEY } from "./supabase-config.js";

			const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

			const form = document.getElementById("login-form");
			form.addEventListener("submit", async (e) => {
				e.preventDefault();
				const email = document.getElementById("email").value.trim();
				const password = document.getElementById("password").value;

				const { error } = await supabase.auth.signInWithPassword({
					email,
					password,
				});

				if (error) {
					alert("Přihlášení se nezdařilo: " + error.message);
					return;
				}

				window.location.href = "chutomer.html";
			});
		</script>
	</body>
</html>

